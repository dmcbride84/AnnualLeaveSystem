@{
    
    Layout = "~/_Layout.cshtml";
     Page.Title = "ALL Tasks";   


    

   

   
     /////<!-- Open a database connection-->
        var db = Database.Open("Annual Leave System");

       
         var dbCommand2 = "SELECT * FROM LeaveRequests ORDER BY startDate ASC";
         var rows1 = db.Query(dbCommand2);

    ///////////////////////////////////////////////

   
}

        <h2>All Leave Requests</h2>
        <div id='cssmenu'>
                    <ul>
                         <li class='active'><a href="@Href("~/Home")"><span>Home</span></a></li>
                         <li class='active'><a href="@Href("~/Admin/Register")"><span>Add User</span></a></li>
                         <li class='active'><a href="@Href("~/admin_and_Managers/staffList")"><span>Staff List</span></a></li>
                         <li class='active'><a href="@Href("~/Admin/ManageRoles")"><span>Manage Roles</span></a></li>
                         <li class='active'><a href="@Href("~/admin_and_Managers/calendar")"><span>View Calendar</span></a></li>
                         <li class='active'><a href="@Href("~/Admin/allTasks")"><span>All Tasks</span></a></li>
                         <li class='active'><a href="@Href("~/admin_and_Managers/ShowGraph")"><span>View Graph</span></a></li>
                         <li><a href="@Href("~/Logout")"><span>Logout</span></a></li>
                        
                     </ul>
                    </div>
                    <br>

       <fieldset>
                <legend>ALL Employee Leave Requests</legend>
                <table border="1" width="100%"> 

                
                
                <tr bgcolor="grey">
                <th>First Name</th> 
                <th>Last Name</th> 
                <th>Description</th> 
                <th>Leave Type</th> 
                <th>Start Date</th> 
                <th>End Date</th> 
                <th>Total days leave requested</th> 
                <th>Request Status</th> 
                </tr>

               @foreach(var rows2 in rows1){
                <tr>
                
                <td>@rows2.firstName</td>
                <td>@rows2.lastName</td>
                <td>@rows2.description</td>
                <td>@rows2.leaveType</td> 
                <td>@rows2.startDate.ToString("dd-MMMM-yyyy")</td> 
                <td>@rows2.endDate.ToString("dd-MMMM-yyyy")</td> 
                <td>@rows2.totalDays</td> 
                <td>@rows2.requestStatus</td> 
                </tr>
                  }  
                </table>

                </fieldset>
